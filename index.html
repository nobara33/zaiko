<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>æ—¥ç”¨å“åœ¨åº«ç®¡ç†</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f4f4f4;
    }
    h1 {
      text-align: center;
    }
    .item {
      margin: 5px 0;
    }
    .out-of-stock {
      color: red;
      font-weight: bold;
    }
    .category-group {
      margin-bottom: 20px;
      padding: 10px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
    }
    label, select, input, button {
      margin: 5px;
    }
    .use-btn, .delete-btn {
      margin-left: 10px;
    }
    .info-display {
      margin: 10px 0;
      font-size: 14px;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>ğŸ§» æ—¥ç”¨å“åœ¨åº«ç®¡ç†ã‚¢ãƒ—ãƒª</h1>

  <div>
    <label>å•†å“å:
      <select id="name" onchange="updateAutoFields()">
        <option value="">-- é¸æŠã—ã¦ãã ã•ã„ --</option>
        <option value="ãƒˆã‚¤ãƒ¬ãƒƒãƒˆãƒšãƒ¼ãƒ‘ãƒ¼">ãƒˆã‚¤ãƒ¬ãƒƒãƒˆãƒšãƒ¼ãƒ‘ãƒ¼</option>
        <option value="ãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒšãƒ¼ãƒ‘ãƒ¼">ãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒšãƒ¼ãƒ‘ãƒ¼</option>
        <option value="ãƒˆã‚¤ãƒ¬ã®èŠ³é¦™å‰¤">ãƒˆã‚¤ãƒ¬ã®èŠ³é¦™å‰¤</option>
        <option value="æ´—æ¿¯æ´—å‰¤">æ´—æ¿¯æ´—å‰¤</option>
        <option value="æ´—æ¿¯ç”¨æ¼‚ç™½å‰¤">æ´—æ¿¯ç”¨æ¼‚ç™½å‰¤</option>
        <option value="æ¶²ä½“æ­¯ç£¨ã">æ¶²ä½“æ­¯ç£¨ã</option>
        <option value="ãƒœãƒ‡ã‚£ã‚½ãƒ¼ãƒ—">ãƒœãƒ‡ã‚£ã‚½ãƒ¼ãƒ—</option>
        <option value="ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼">ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼</option>
        <option value="ãƒãƒ³ãƒ‰ã‚½ãƒ¼ãƒ—">ãƒãƒ³ãƒ‰ã‚½ãƒ¼ãƒ—</option>
        <option value="é£Ÿå™¨æ´—ã„æ´—å‰¤">é£Ÿå™¨æ´—ã„æ´—å‰¤</option>
        <option value="ã‚´ãƒŸè¢‹">ã‚´ãƒŸè¢‹</option>
        <option value="é™¤èŒã‚·ãƒ¼ãƒˆ">é™¤èŒã‚·ãƒ¼ãƒˆ</option>
        <option value="æµã›ã‚‹ãƒˆã‚¤ãƒ¬ãƒ–ãƒ©ã‚·">æµã›ã‚‹ãƒˆã‚¤ãƒ¬ãƒ–ãƒ©ã‚·</option>
        <option value="æ°´åˆ†ã‚·ãƒ¼ãƒˆ">æ°´åˆ†ã‚·ãƒ¼ãƒˆ</option>
      </select>
    </label>
    <label>åœ¨åº«æ•°: <input id="stock" type="number" min="0" value="1" /></label>
    <button onclick="addItem()">è¿½åŠ </button>

    <div id="infoDisplay" class="info-display"></div>
  </div>

  <hr />

  <div id="itemsContainer"></div>

  <script>
    const itemInfo = {
      "ãƒˆã‚¤ãƒ¬ãƒƒãƒˆãƒšãƒ¼ãƒ‘ãƒ¼":     { category: "ãƒˆã‚¤ãƒ¬é–¢é€£",       priority: "æœ€å„ªå…ˆ" },
      "ãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒšãƒ¼ãƒ‘ãƒ¼":     { category: "å°æ‰€ãƒ»å®¶åº­",       priority: "ä¸­" },
      "ãƒˆã‚¤ãƒ¬ã®èŠ³é¦™å‰¤":         { category: "ãƒˆã‚¤ãƒ¬é–¢é€£",       priority: "ä½" },
      "æ´—æ¿¯æ´—å‰¤":               { category: "æ´—æ¿¯ãƒ»æƒé™¤",       priority: "é«˜" },
      "æ´—æ¿¯ç”¨æ¼‚ç™½å‰¤":           { category: "æ´—æ¿¯ãƒ»æƒé™¤",       priority: "é«˜" },
      "æ¶²ä½“æ­¯ç£¨ã":              { category: "ãƒã‚¹ãƒ»æ´—é¢",       priority: "ä¸­" },
      "ãƒœãƒ‡ã‚£ã‚½ãƒ¼ãƒ—":           { category: "ãƒã‚¹ãƒ»æ´—é¢",       priority: "ä¸­" },
      "ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼":             { category: "ãƒã‚¹ãƒ»æ´—é¢",       priority: "ä¸­" },
      "ãƒãƒ³ãƒ‰ã‚½ãƒ¼ãƒ—":           { category: "ãƒã‚¹ãƒ»æ´—é¢",       priority: "ä¸­" },
      "é£Ÿå™¨æ´—ã„æ´—å‰¤":           { category: "å°æ‰€ãƒ»å®¶åº­",       priority: "é«˜" },
      "ã‚´ãƒŸè¢‹":                 { category: "å°æ‰€ãƒ»å®¶åº­",       priority: "ä¸­" },
      "é™¤èŒã‚·ãƒ¼ãƒˆ":             { category: "æ´—æ¿¯ãƒ»æƒé™¤",       priority: "ä¸­" },
      "æµã›ã‚‹ãƒˆã‚¤ãƒ¬ãƒ–ãƒ©ã‚·":     { category: "ãƒˆã‚¤ãƒ¬é–¢é€£",       priority: "ä½" },
      "æ°´åˆ†ã‚·ãƒ¼ãƒˆ":             { category: "ãƒˆã‚¤ãƒ¬é–¢é€£",       priority: "ä¸­" }
    };

    let items = JSON.parse(localStorage.getItem("items") || "[]");

    function saveItems() {
      localStorage.setItem("items", JSON.stringify(items));
    }

    function updateAutoFields() {
      const name = document.getElementById("name").value;
      const info = itemInfo[name];
      const infoDisplay = document.getElementById("infoDisplay");

      if (info) {
        infoDisplay.textContent = `ã‚«ãƒ†ã‚´ãƒª: ${info.category} ï¼ å„ªå…ˆåº¦: ${info.priority}`;
      } else {
        infoDisplay.textContent = "";
      }
    }

    function addItem() {
      const name = document.getElementById("name").value;
      const stockToAdd = parseInt(document.getElementById("stock").value);
      const info = itemInfo[name];

      if (!name || isNaN(stockToAdd) || !info) return;

      const existing = items.find(item => item.name === name);
      if (existing) {
        existing.stock += stockToAdd;
      } else {
        items.push({
          name,
          stock: stockToAdd,
          category: info.category,
          priority: info.priority
        });
      }

      saveItems();
      renderItems();

      document.getElementById("name").value = "";
      document.getElementById("stock").value = "1";
      document.getElementById("infoDisplay").textContent = "";
    }

    function useItem(name) {
      const item = items.find(i => i.name === name);
      if (item && item.stock > 0) {
        item.stock -= 1;
        saveItems();
        renderItems();
      }
    }

    function deleteItem(name) {
      items = items.filter(i => i.name !== name);
      saveItems();
      renderItems();
    }

    function renderItems() {
      const container = document.getElementById("itemsContainer");
      container.innerHTML = "";

      const grouped = {};
      items.forEach(item => {
        if (!grouped[item.category]) grouped[item.category] = [];
        grouped[item.category].push(item);
      });

      for (const [category, itemList] of Object.entries(grouped)) {
        const groupDiv = document.createElement("div");
        groupDiv.className = "category-group";
        const title = document.createElement("h2");
        title.textContent = `ğŸ“‚ ${category}`;
        groupDiv.appendChild(title);

        itemList.sort((a, b) => {
          const order = { "æœ€å„ªå…ˆ": 0, "é«˜": 1, "ä¸­": 2, "ä½": 3 };
          return order[a.priority] - order[b.priority];
        });

        for (const item of itemList) {
          const div = document.createElement("div");
          div.className = "item";
          if (item.stock === 0) div.classList.add("out-of-stock");

          div.innerHTML = `${item.name}ï¼ˆåœ¨åº«: ${item.stock} ï¼ å„ªå…ˆåº¦: ${item.priority}ï¼‰` +
            `<button class="use-btn" onclick="useItem('${item.name}')">ä½¿ã£ãŸ</button>` +
            `<button class="delete-btn" onclick="deleteItem('${item.name}')">å‰Šé™¤</button>`;
          groupDiv.appendChild(div);
        }

        container.appendChild(groupDiv);
      }
    }

    renderItems();
  </script>
</body>
</html>
